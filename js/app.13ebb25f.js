(function(t){function e(e){for(var o,s,i=e[0],c=e[1],u=e[2],l=0,m=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(m.length)m.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},r={app:0},a=[];function s(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"8733d55a"}[t]+".js"}function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=o);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=s(t);var u=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",u.name="ChunkLoadError",u.type=o,u.request=a,n[1](u)}r[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"025d":function(t,e,n){"use strict";var o=n("27b1"),r=n.n(o);r.a},"25cc":function(t,e,n){"use strict";var o=n("6e5d"),r=n.n(o);r.a},"27b1":function(t,e,n){},"4ffd":function(t,e){t.exports="data:image/png;base64,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"},5452:function(t,e,n){"use strict";var o=n("af35"),r=n.n(o);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o,r,a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.isBurgerMenu?"padding-left":null,attrs:{id:"app"}},[n("Header",{attrs:{isBurgerMenu:t.isBurgerMenu}}),n("router-view")],1)},i=[],c=(n("caad"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isBurgerMenu?n("header",{staticClass:"isVertical",class:t.isHidden?null:"large"},[n("button",{on:{click:t.toggleMenu}},[n("span",[n("font-awesome-icon",{attrs:{icon:["fas",t.icon]}})],1)]),n("nav",{class:t.isHidden?"hidden":"open",attrs:{role:"navigation"}},[n("ul",{staticClass:"navbar-nav"},[n("li",{staticClass:"navbar-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Accueil")])],1),n("li",{staticClass:"navbar-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Voter")])],1),t.isLogged?n("li",{staticClass:"navbar-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/account/"+t.currentUser._id}},[t._v("Mon compte")])],1):t._e(),n("li",{staticClass:"navbar-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Le scrutin majoritaire")])],1),n("li",{staticClass:"navbar-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[t._v("À propos")])],1),t.isLogged?n("li",{staticClass:"navbar-item"},[n("form",{attrs:{id:"logoutForm"},on:{submit:t.logout}},[n("button",{attrs:{type:"submit",value:"Submit"}},[t._v("Déconnexion")])])]):t._e()])])]):n("header",[n("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light",attrs:{role:"navigation"}},[n("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("Voton")]),t._m(0),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[n("li",{staticClass:"nav-item active"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Accueil")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Voter")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Le scrutin majoritaire")])],1),n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[t._v("À propos")])],1)])])])])}),u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],l=(n("d3b7"),n("96cf"),n("1da1")),d=n("bc3a"),m=n.n(d),p={name:"ApiCalls",data:function(){return{API_URL:"https://ireneburlet.fr/votonapi/api/",API_TOKEN:"70c77d44498bbd384a81efc51ffdd1",user_token:localStorage.getItem("user-token")||"",user:localStorage.getItem("currentUser")||{}}},methods:{login:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,o){m.a.defaults.baseURL=e.API_URL,m.a.post("cockpit/authUser?token=".concat(e.API_TOKEN),t).then((function(t){localStorage.setItem("user-token",t.data.api_key),localStorage.setItem("currentUser",JSON.stringify(t.data)),n(t)})).catch((function(t){o(t)}))})));case 1:case"end":return n.stop()}}),n)})))()},logout:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:localStorage.removeItem("currentUser"),localStorage.removeItem("user-token"),t.$router.push("/");case 3:case"end":return e.stop()}}),e)})))()},saveUser:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,o){m.a.defaults.baseURL=e.API_URL,m.a.post("cockpit/saveUser?token=".concat(e.API_TOKEN),{user:t}).then((function(t){var e=JSON.parse(t.config.data);n({user:e.user.user,password:e.user.password})})).catch((function(t){o(t)}))})));case 1:case"end":return n.stop()}}),n)})))()},findRecord:function(t,e){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise((function(o,r){m.a.defaults.baseURL=n.API_URL,m.a.defaults.headers.common["Cockpit-Token"]=n.user_token,m.a.post("/collections/get/".concat(t),e).then((function(t){return o(t)})).catch((function(t){return r(t)}))})));case 1:case"end":return o.stop()}}),o)})))()},createOrSaveRecord:function(t,e){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.abrupt("return",new Promise((function(o,r){m.a.defaults.baseURL=n.API_URL,m.a.defaults.headers.common["Cockpit-Token"]=n.user_token,m.a.post("/collections/save/".concat(t),{data:e}).then((function(t){return o(t)})).catch((function(t){return r(t)}))})));case 1:case"end":return o.stop()}}),o)})))()},removeRecord:function(t,e){return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,o){m.a.post("/collections/remove/".concat(t),{filter:e}).then((function(t){return n(t)})).catch((function(t){return o(t)}))})));case 1:case"end":return n.stop()}}),n)})))()}}},v=p,f=n("2877"),h=Object(f["a"])(v,o,r,!1,null,null,null),b=h.exports,g={name:"Header",mixins:[b],data:function(){return{icon:"bars",isHidden:!0,currentUser:JSON.parse(localStorage.getItem("currentUser"))}},computed:{isLogged:function(){return!!localStorage.getItem("currentUser")}},props:{isBurgerMenu:{type:Boolean,default:!1}},methods:{toggleMenu:function(){this.icon="bars"==this.icon?"times":"bars",this.isHidden=!this.isHidden}}},_=g,C=(n("5452"),Object(f["a"])(_,c,u,!1,null,null,null)),w=C.exports,A={components:{Header:w},computed:{isBurgerMenu:function(){return!!localStorage.getItem("currentUser")||["Vote","CreateAnonymVote"].includes(this.$route.name)}}},y=A,k=(n("5c0b"),Object(f["a"])(y,s,i,!1,null,null,null)),P=k.exports,x=n("8c4f"),V=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"row main-container",attrs:{id:"content"}},[o("div",{staticClass:"col-lg-4 text-center",attrs:{id:"description"}},[o("img",{staticClass:"my-5",attrs:{src:n("4ffd"),alt:"",width:"175px;"}}),o("h2",{staticClass:"mb-4"},[t._v("Le vote majoritaire en toute simplicité")]),t._m(0),o("button",{staticClass:"btn btn-primary",on:{click:t.createAnonymVote}},[t._v("Créer un vote")])]),o("div",{staticClass:"d-flex col-lg-8 cards-ctn"},[o("small-card-form",{attrs:{title:"Connexion",subTitle:"Accéder à mon compte",buttonSubmitText:"Me connecter",error:t.errorAuthentication,submitMethod:t.authentication}},[o("div",{staticClass:"form-group mb-3",attrs:{slot:"input"},slot:"input"},[o("label",{attrs:{for:"loginUsername"}},[t._v("Nom d'utilisateur")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginUsername,expression:"loginUsername"}],staticClass:"form-control",attrs:{type:"text",id:"loginUsername",placeholder:"Nom d'utilisateur",name:"loginUsername",required:""},domProps:{value:t.loginUsername},on:{input:function(e){e.target.composing||(t.loginUsername=e.target.value)}}})]),o("div",{staticClass:"form-group mb-3",attrs:{slot:"input"},slot:"input"},[o("label",{attrs:{for:"loginPassword"}},[t._v("Mot de passe (5 caractères minimum)")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginPassword,expression:"loginPassword"}],staticClass:"form-control",attrs:{type:"password",id:"loginPassword",placeholder:"Mot de passe",name:"loginPassword",pattern:"[^'\\x22\\s]{5,}",title:"Espaces et apostrophes non autorisés",required:""},domProps:{value:t.loginPassword},on:{input:function(e){e.target.composing||(t.loginPassword=e.target.value)}}})]),o("a",{staticClass:"d-block mt-2",attrs:{slot:"link",href:"",onclick:t.reset_password()},slot:"link"},[t._v("Identifiant ou mot de passe oublié ?")])]),o("small-card-form",{attrs:{title:"Inscription",subTitle:"Créez un compte pour pouvoir sauvegarder vos votes",buttonSubmitText:"M'inscrire",error:t.errorSignin,submitMethod:t.createUser}},[o("div",{staticClass:"form-group mb-3",attrs:{slot:"input"},slot:"input"},[o("label",{attrs:{for:"create-username"}},[t._v("Nom d'utilisateur")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createUsername,expression:"createUsername"}],staticClass:"form-control",attrs:{type:"text",id:"create-username",placeholder:"Choisir un nom d'utilisateur",name:"create-username",pattern:"[A-Za-z0-9_\\-]{1,}",title:"Pas de caractères spéciaux",required:""},domProps:{value:t.createUsername},on:{input:function(e){e.target.composing||(t.createUsername=e.target.value)}}})]),o("div",{staticClass:"form-group mb-3",attrs:{slot:"input"},slot:"input"},[o("label",{attrs:{for:"create-email"}},[t._v("Email")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createEmail,expression:"createEmail"}],staticClass:"form-control",attrs:{type:"email",id:"create-email",placeholder:"Entrez un email valide",name:"create-email",pattern:"[^'\\x22\\s]{5,}",title:"Espaces et apostrophes non autorisés",required:""},domProps:{value:t.createEmail},on:{input:function(e){e.target.composing||(t.createEmail=e.target.value)}}})]),o("div",{staticClass:"form-group mb-3",attrs:{slot:"input"},slot:"input"},[o("label",{attrs:{for:"create-password"}},[t._v("Mot de passe (5 caractères minimum)")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createPassword,expression:"createPassword"}],staticClass:"form-control",attrs:{type:"password",id:"create-password",placeholder:"Mot de passe",name:"create-password",pattern:"[^'\\x22\\s]+",title:"Espaces et apostrophes non autorisés",min:"6",required:""},domProps:{value:t.createPassword},on:{input:function(e){e.target.composing||(t.createPassword=e.target.value)}}})]),o("div",{staticClass:"form-group mb-3",attrs:{slot:"input"},slot:"input"},[o("label",{attrs:{for:"create-password2"}},[t._v("Confirmation du mot de passe")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",class:{"border-danger":t.pswdNotEqual},attrs:{type:"password",id:"create-password2",placeholder:"Entrez une nouvelle fois le mot de passe",name:"create-password2",pattern:"[^'\\x22\\s]{5,}",title:"Espaces et apostrophes non autorisés",min:"6",required:""},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}})])]),o("small-card-form",{attrs:{title:"Répondre à une invitation",subTitle:"Rejoindre un vote en cours via un lien d'invitation",buttonSubmitText:"Rejoindre",submitMethod:t.joinVote}},[o("div",{staticClass:"form-group mb-3",attrs:{slot:"input"},slot:"input"},[o("label",{attrs:{for:"link"}},[t._v("Lien d'invitation")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.voteLink,expression:"voteLink"}],staticClass:"form-control",attrs:{type:"url",id:"link_vote",placeholder:"https://voton.com/vote/numeroduvote...",name:"link",required:""},domProps:{value:t.voteLink},on:{input:function(e){e.target.composing||(t.voteLink=e.target.value)}}})])])],1)])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"px-3"},[t._v(" Avec Voton, organisez un vote en quelques clics, "),n("br"),t._v("sur la base du "),n("b",[t._v("scrutin Majoritaire")]),t._v(", un système de scrutin nouvelle génération démocratiquement et mathématiquement plus avancé que le scrutin Uninominatif à 2 tours classiques. ")])}],U=(n("ac1f"),n("5319"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card-lg"},[n("div",{staticClass:"card-body"},[n("h3",{staticClass:"card-title"},[t._v(t._s(t.title))]),n("p",{staticClass:"card-subtitle"},[t._v(t._s(t.subTitle))]),n("p",{staticClass:"text-danger"},[t._v(t._s(t.error))]),n("form",{attrs:{method:"post",autocomplete:"on"},on:{submit:t.submitCallback}},[t._t("input"),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-primary btn",attrs:{type:"submit",value:"submit"}},[t._v(t._s(t.buttonSubmitText))]),t._t("link")],2)],2)])])}),O=[],L={name:"smallCardForm",props:{title:{type:String,required:!0},subTitle:String,buttonSubmitText:{type:String,required:!0},error:String,submitMethod:{type:Function,required:!0}},methods:{submitCallback:function(t){t.preventDefault(),this.submitMethod()}}},M=L,D=(n("f281"),Object(f["a"])(M,U,O,!1,null,"0b3c5e00",null)),R=D.exports,j=n("9612"),E={name:"Home",data:function(){return{createUsername:null,createEmail:null,createPassword:"",confirmPassword:"",loginUsername:null,loginPassword:null,errorAuthentication:null,errorSignin:null,voteLink:null}},mixins:[b],components:{SmallCardForm:R},computed:{pswdNotEqual:function(){return this.createPassword!==this.confirmPassword}},methods:{authentication:function(){var t=this,e=this.loginUsername,n=this.loginPassword;this.login({user:e,password:n}).then((function(e){t.$router.push("/account/".concat(e.data._id)).catch((function(t){console.log(t)}))})).catch((function(){t.errorAuthentication="Mauvais pseudo ou mot de passe"}))},createUser:function(){var t=this,e={name:this.createUsername,user:this.createUsername,email:this.createEmail,password:this.createPassword,group:"simpleUser",active:!0,api_key:"account-"+j["a"].v1().replace(/-/g,"")};this.saveUser(e).then((function(e){t.login(e).then((function(e){t.$router.push("/account/".concat(e.data._id))}))})).catch((function(e){console.log(e),e&&e.response&&412==e.response.status&&(t.errorSignin="Non d'utilisateur déjà existant")}))},joinVote:function(){var t=/^http[s]{0,1}:\/\/[a-zA-Z\d.]+\//g,e=this.voteLink.replace(t,"");this.$router.push(e)},createAnonymVote:function(){this.$router.push("/vote/new")},reset_password:function(){}}},N=E,I=(n("25cc"),Object(f["a"])(N,V,S,!1,null,"17ee991c",null)),T=I.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"mx-auto col-lg-7 col-8 text-center",attrs:{id:"vote","data-idvote":"<?php echo $id_vote; ?>","data-username":"<?php echo $username; ?>"}},[n("div",{staticClass:"my-4"},[n("h2",[t._v(t._s(t.vote.name))]),n("h4",[t._v(t._s(t.vote.description))])]),n("div",[n("h3",{staticClass:"text-left"},[t._v(" "+t._s(t.vote.nbChoices)+" proposition"+t._s(t.vote.nbChoices>1?"s":"")+" ")]),n("form",{attrs:{id:"choicesForm"},on:{submit:t.submitVote}},[t._l(t.choices,(function(e,o){return n("Proposition",{key:o,attrs:{item:e,voteStatus:t.vote.status,hasAlreadyVoted:t.hasAlreadyVoted,choice_value:t.hasAlreadyVoted?t.ballot.choices_values[e._id].value:void 0},on:{childToParent:t.updateBulletin}})})),1==t.vote.status?n("button",{staticClass:"btn btn-primary d-block",attrs:{type:"submit",disabled:t.hasAlreadyVoted}},[t._v("Déposer mon bulletin")]):t._e(),1==t.vote.status&&t.vote.user_id==t.currentUser._id?n("button",{staticClass:"btn btn-outline-primary d-block",attrs:{id:"closeVote",type:"button"},on:{click:function(e){return t.closeVote(t.vote._id)}}},[t._v("Fermer le vote")]):t._e(),t.hasAlreadyVoted?n("small",[t._v("Vous avez déjà voté !")]):t._e()],2)])])])},F=[],Q=(n("4160"),n("159b"),n("ddb0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card col-12 my-3 mx-0"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"row mx-0 mb-2"},[n("h4",{staticClass:"card-title"},[t._v(t._s(t.item.name))]),n("h5",{staticClass:"card-subtitle mention ml-auto mt-1"},[t._v(t._s(t.mention))])]),"1"==t.voteStatus?n("div",{staticClass:"d-flex w-100 justify-content-between"},t._l(t.mentions,(function(e,o){return n("div",{key:t.item._id+"_"+e},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pickedMention,expression:"pickedMention"}],attrs:{type:"radio",name:t.item._id+"_"+e,disabled:t.hasAlreadyVoted},domProps:{value:o,checked:t._q(t.pickedMention,o)},on:{click:function(e){t.hasAlreadyVoted||t.updateBulletin(o)},change:function(e){t.pickedMention=o}}}),n("label",[t._v(t._s(o))])])})),0):n("div",{staticClass:"nmb_voices_bar"},t._l(t.mentions,(function(e,o){return n("div",{key:t.item._id+"_"+e,style:{width:t.getWidth(o)+"%"}})})),0)])])}),q=[],H=(n("25f0"),{name:"Proposition",props:{item:{type:Object,required:!0},voteStatus:String,hasAlreadyVoted:Boolean,childToParent:Function,choice_value:String},data:function(){return{mentions:{nb1:"Non",nb2:"Insuffisant",nb3:"Passable",nb4:"Neutre",nb5:"Assez bien",nb6:"Bien"},pickedMention:this.hasAlreadyVoted?this.choice_value:"nb6"}},computed:{mention:function(){return this.mentions[this.pickedMention]}},methods:{updateBulletin:function(t){this.$emit("childToParent",this.item._id,t)},getWidth:function(t){for(var e=0,n=1;n<6;n++)e+=this.item[t];var o=100*this.item[t]/e;return o.toString()}}}),J=H,W=Object(f["a"])(J,Q,q,!1,null,"dbb179c6",null),G=W.exports,K={name:"Vote",components:{Proposition:G},mixins:[b],data:function(){return{API_URL:"https://ireneburlet.fr/votonapi/api/",token:localStorage.getItem("user-token"),currentUser:JSON.parse(localStorage.getItem("currentUser")),hasAlreadyVoted:!1,ballot:{},vote:{},choices:[],choices_values:{}}},created:function(){var t=this;this.findRecord("votes",{filter:{_id:this.$route.params.vote_id}}).then((function(e){t.vote=e.data.entries[0],t.findRecord("choices",{filter:{vote_id:t.$route.params.vote_id}}).then((function(e){t.choices=e.data.entries,e.data.entries.forEach((function(e){t.choices_values[e._id]={name:e.name,value:"nb6"}}))})).catch((function(t){return console.error(t)}))})).catch((function(t){return console.error(t)})),this.findRecord("ballots",{filter:{vote_id:this.$route.params.vote_id,voting_user_id:this.currentUser._id}}).then((function(e){e.data.entries.length>0&&(t.ballot=e.data.entries[0],t.hasAlreadyVoted=!0)})).catch((function(t){return console.error(t)}))},methods:{updateBulletin:function(t,e){this.choices_values[t].value=e},submitVote:function(t){var e=this;t.preventDefault(),this.createOrSaveRecord("ballots",{vote_id:this.vote._id,voting_user_id:this.currentUser._id,choices_values:this.choices_values}).catch((function(t){return console.error(t)})),this.createOrSaveRecord("votes",{_id:this.vote._id,nbBulletins:parseInt(this.vote.nbBulletins)+1}).then((function(){return e.$router.push("/account/"+e.currentUser._id)})).catch((function(t){return console.error(t)}))},closeVote:function(t){var e=this;this.createOrSaveRecord("votes",{_id:t,status:3}).then((function(){return e.$router.push("/account/"+e.currentUser._id)})).catch((function(t){return console.error(t)}))}}},z=K,Y=Object(f["a"])(z,B,F,!1,null,null,null),X=Y.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"col-6 mx-auto text-center"},[n("h3",{staticClass:"my-4"},[t._v(t._s(t.isNew?"Nouveau vote":"Édition du vote"))]),n("form",{on:{submit:t.openVote}},[n("div",{staticClass:"mb-5"},[n("h4",[t._v("Informations générales")]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"title"}},[t._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{id:"title",type:"text",name:"title","aria-describedby":"emailHelp",placeholder:"Titre de votre vote",required:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"question"}},[t._v("Question")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{id:"question",type:"text",name:"question",placeholder:"Question non ambiguë",required:""},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),t.choices.length>0?n("div",{staticClass:"mb-5"},[n("h4",[t._v("Propositions")]),n("div",{attrs:{id:"propositions"}},[n("MultiInput",{attrs:{initialValues:t.choices},on:{childToParent:t.updateChoices}})],1)]):t._e(),t.isNew&&!t.userIsLogged?n("div",{staticClass:"mb-5"},[n("h4",[t._v("Suppression")]),n("label",{attrs:{for:""}},[t._v("Après")]),n("div",{staticClass:"custom-control custom-radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pickedDelay,expression:"pickedDelay"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"one",name:"limit"},domProps:{value:1,checked:t._q(t.pickedDelay,1)},on:{change:function(e){t.pickedDelay=1}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"one"}},[t._v("1 jour")])]),n("div",{staticClass:"custom-control custom-radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pickedDelay,expression:"pickedDelay"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"two",name:"limit"},domProps:{value:2,checked:t._q(t.pickedDelay,2)},on:{change:function(e){t.pickedDelay=2}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"two"}},[t._v("2 jours")])]),n("div",{staticClass:"custom-control custom-radio"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.pickedDelay,expression:"pickedDelay"}],staticClass:"custom-control-input",attrs:{type:"radio",id:"seven",name:"limit"},domProps:{value:7,checked:t._q(t.pickedDelay,7)},on:{change:function(e){t.pickedDelay=7}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"seven"}},[t._v("7 jours")])])]):t._e(),n("button",{staticClass:"btn btn-outline-dark",attrs:{type:"button"},on:{click:t.cancelModifications}},[t._v("Annuler")]),t.isNew?t._e():n("button",{staticClass:"btn btn-outline-primary",attrs:{id:"saveVote",type:"button"},on:{click:t.saveVote}},[t._v("Enregistrer")]),n("button",{staticClass:"btn btn-primary",attrs:{id:"publishVote",type:"submit"}},[t._v("Publier le vote")])])])},$=[],tt=(n("a4d3"),n("e01a"),n("d81d"),n("13d5"),n("b85c")),et=n("5530"),nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group"},[t._l(t.values,(function(e,o){return n("div",{key:"val_"+o,staticClass:"w-75 d-flex justify-content-between mb-3 mx-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"item.val"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Proposition "+(o+1)},domProps:{value:e.val},on:{input:[function(n){n.target.composing||t.$set(e,"val",n.target.value)},function(e){return t.updateValue()}]}}),n("button",{staticClass:"btn bg-white m-0",attrs:{type:"button"},on:{click:function(e){return t.removeValue(o)}}},[n("font-awesome-icon",{staticClass:"text-danger",attrs:{icon:["far","trash-alt"]}})],1)])})),n("button",{staticClass:"btn btn-primary m-0",attrs:{type:"button",id:"addProposition"},on:{click:function(e){return t.addValue()}}},[t._v("Ajouter une alternative")])],2)},ot=[],rt=(n("a434"),{name:"MultiInput",props:{childToParent:Function,initialValues:Array},data:function(){return{values:this.initialValues}},watch:{values:function(t){this.$emit("childToParent",t)}},methods:{addValue:function(){this.values.push({}),this.$emit("input",this.values)},removeValue:function(t){this.values.length>1&&(this.values.splice(t,1),this.$emit("input",this.values))},updateValue:function(){this.$emit("input",this.values)}}}),at=rt,st=(n("025d"),Object(f["a"])(at,nt,ot,!1,null,"1dee3163",null)),it=st.exports,ct={name:"EditVote",components:{MultiInput:it},data:function(){return{API_URL:"https://ireneburlet.fr/votonapi/api/",isNew:"EditVote"!==this.$route.name,userIsLogged:!!localStorage.getItem("currentUser"),currentUser:JSON.parse(localStorage.getItem("currentUser")),token:localStorage.getItem("user-token"),vote:{},title:"",user_id:null,description:"",status:1,openDate:null,nbChoices:0,deleteDate:null,pickedDelay:1,choices:[],notEnoughChoices:!1}},created:function(){var t=this;this.isNew||(m.a.defaults.baseURL=this.API_URL,m.a.defaults.headers.common["Cockpit-Token"]=this.token,m.a.post("/collections/get/votes",{filter:{_id:this.$route.params.vote_id}}).then((function(e){t.vote=e.data.entries[0],t.vote.nbChoices>0?m.a.post("/collections/get/choices",{filter:{vote_id:t.$route.params.vote_id}}).then((function(e){t.choices=e.data.entries.map((function(t){return{val:t.name}}))})):t.choices=[{val:""},{val:""}],t.title=t.vote.title,t.user_id=t.vote.user_id,t.description=t.vote.description,t.status=t.vote.status,t.openDate=t.vote.openDate,t.nbChoices=t.vote.nbChoices,t.deleteDate=t.vote.deleteDate||null})).catch((function(t){console.error(t)})))},methods:{updateChoices:function(t){this.choices=t},addDays:function(t,e){var n=new Date(t);return n.setDate(n.getDate()+e),n},cancelModifications:function(){confirm("Êtes-vous sûr de vouloir perdre vos modifications ?")&&this.$router.push("/account/"+this.currentUser._id)},getDatas:function(t){var e={_id:this.vote._id,title:this.title,user_id:this.user_id||"5e8ca11b98e27a43f37ab051",description:this.description,status:t.status,openDate:this.openDate||new Date,nbChoices:this.choices.reduce((function(t,e){return t+(e.val?1:0)}),0),nbBulletins:0,deleteDate:this.isNew&&!this.userIsLogged?this.addDays(this.openDate,this.pickedDelay):null};return e},saveVote:function(){var t=this.getDatas({status:this.status});this.saveModifications(t)},openVote:function(t){t.preventDefault();var e=this.getDatas({status:1});e.nbChoices<2||this.saveModifications(e)},saveModifications:function(t){var e=this;m.a.defaults.baseURL=this.API_URL,m.a.defaults.headers.common["Cockpit-Token"]=this.token,m.a.post("/collections/save/votes",{data:Object(et["a"])({},t)}).then(Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveChoices(e.vote._id);case 2:e.$router.push("/");case 3:case"end":return t.stop()}}),t)})))).catch((function(t){console.error(t)}))},createChoices:function(t){var e,n=Object(tt["a"])(this.choices);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.val&&m.a.post("/collections/save/choices",{data:{vote_id:t,name:o.val}}).catch((function(t){console.error(t)}))}}catch(r){n.e(r)}finally{n.f()}},saveChoices:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){e.vote.nbChoices>0?m.a.post("/collections/remove/choices",{filter:{vote_id:t}}).then((function(){e.createChoices(t),n("done")})).catch((function(t){console.error(t)})):(e.createChoices(t),n("done"))})));case 1:case"end":return n.stop()}}),n)})))()}}},ut=ct,lt=Object(f["a"])(ut,Z,$,!1,null,null,null),dt=lt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("small-card-form",{attrs:{title:"Démarrer un vote",buttonSubmitText:"Créer un vote",submitMethod:t.createVote}},[n("div",{staticClass:"form-group",attrs:{slot:"input"},slot:"input"},[n("label",{attrs:{for:"newVote-title"}},[t._v("Titre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.voteTitle,expression:"voteTitle"}],staticClass:"form-control",attrs:{type:"text",id:"newVote-title",placeholder:"Titre de votre vote",name:"newVote-title",maxlength:"30",pattern:"([^'\\x22]{1,})+",title:"Pas d'apostrophes autorisées",required:""},domProps:{value:t.voteTitle},on:{input:function(e){e.target.composing||(t.voteTitle=e.target.value)}}})]),n("div",{staticClass:"form-group",attrs:{slot:"input"},slot:"input"},[n("label",{attrs:{for:"newVote-question"}},[t._v("Question")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.voteQuestion,expression:"voteQuestion"}],staticClass:"form-control",attrs:{type:"text",id:"newVote-question",placeholder:"Saisissez une question non ambigüe",name:"newVote-question",pattern:"([^'\\x22])++",title:"Pas d'apostrophes autorisées",required:""},domProps:{value:t.voteQuestion},on:{input:function(e){e.target.composing||(t.voteQuestion=e.target.value)}}})])]),n("PreviewCardsList",{attrs:{list:t.inprogressVotes,titleList:"En cours"}}),n("PreviewCardsList",{attrs:{list:t.closedVotes,titleList:"Fermés"}}),n("PreviewCardsList",{attrs:{list:t.archivedVotes,titleList:"Archivés"}})],1)},pt=[],vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-10 mx-auto"},[n("h4",{staticClass:"ml-3"},[t._v(t._s(t.titleList))]),n("div",{staticClass:"d-flex flex-wrap"},t._l(t.list,(function(e){return n("div",{key:e._id,staticClass:"col-6"},[n("VotePreviewCard",{attrs:{title:e.title,state:t.voteState(e),info:t.infoVote(e),link:t.linkVote(e)}})],1)})),0)])},ft=[],ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"card mx-0 p-2 mb-2",attrs:{to:t.link}},[n("span",{staticClass:"text-open"},[t._v(t._s(t.state))]),n("h5",[t._v(t._s(t.title))]),t._v(" "+t._s(t.info)+" ")])},bt=[],gt={name:"VotePreviewCard",props:{title:{type:String,required:!0},info:{type:String,required:!0},state:{type:String,required:!0},link:{type:String,required:!0}}},_t=gt,Ct=Object(f["a"])(_t,ht,bt,!1,null,"2dee4fde",null),wt=Ct.exports,At={name:"PreviewCardsList",components:{VotePreviewCard:wt},props:{list:{type:Array,default:function(){return[]}},titleList:String},methods:{voteState:function(t){return 0==t.status?"Non publié":1==t.status?"Ouvert":2==t.status?"Fermé":3==t.status?"Archivé":""},infoVote:function(t){return 0==t.status?"Éditer":1==t.status?t.nbBulletins+" bulletin"+(t.nbBulletins>1?"s":""):""},linkVote:function(t){return(0==t.status?"/edit/":"/vote/")+t._id}}},yt=At,kt=Object(f["a"])(yt,vt,ft,!1,null,"1cd33ec4",null),Pt=kt.exports,xt={name:"Account",components:{SmallCardForm:R,PreviewCardsList:Pt},mixins:[b],data:function(){return{API_URL:"https://ireneburlet.fr/votonapi/api/",token:localStorage.getItem("user-token"),currentUser:JSON.parse(localStorage.getItem("currentUser")),voteTitle:null,voteQuestion:null,inprogressVotes:[],closedVotes:[],archivedVotes:[]}},created:function(){this.getInProgressVotes(),this.getClosedVote()},methods:{getInProgressVotes:function(){var t=this;this.findRecord("votes",{filter:{user_id:this.currentUser._id,status:{$in:[0,1]}},sort:{_modified:-1}}).then((function(e){return t.inprogressVotes=e.data.entries})).catch((function(t){return console.error(t)}))},getClosedVote:function(){var t=this;this.findRecord("votes",{filter:{user_id:this.currentUser._id,status:2},sort:{_modified:-1}}).then((function(e){return t.closedVotes=e.data.entries})).catch((function(t){return console.error(t)}))},createVote:function(){var t=this;this.createOrSaveRecord("votes",{title:this.voteTitle,description:this.voteQuestion,user_id:this.currentUser._id,creationDate:new Date,status:0,nbBulletins:0,nbChoices:0}).then((function(e){return t.$router.push("/edit/"+e.data._id)})).catch((function(t){return console.error(t)}))}}},Vt=xt,St=Object(f["a"])(Vt,mt,pt,!1,null,null,null),Ut=St.exports,Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},Lt=[],Mt={name:"Settings"},Dt=Mt,Rt=Object(f["a"])(Dt,Ot,Lt,!1,null,"6393997a",null),jt=Rt.exports;a["a"].use(x["a"]);var Et=[{path:"/",name:"Home",component:T,beforeEnter:function(t,e,n){localStorage.getItem("currentUser")?n("/account/"+JSON.parse(localStorage.getItem("currentUser"))._id):n()}},{path:"/vote/new",name:"CreateAnonymVote",component:dt},{path:"/vote/:vote_id",name:"Vote",component:X},{path:"/edit/:vote_id",name:"EditVote",component:dt},{path:"/account/:user_id",name:"Account",component:Ut,beforeEnter:function(t,e,n){var o=JSON.parse(localStorage.getItem("currentUser"));t.params.user_id!==o._id?n({name:"Home"}):n()},children:[{path:":vote_id",component:X},{path:"settings",component:jt}]},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Nt=new x["a"]({routes:Et}),It=Nt,Tt=n("9483");Object(Tt["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});n("4989"),n("ab8b");var Bt=n("ecee"),Ft=n("c074"),Qt=n("b702"),qt=n("ad3d");Bt["c"].add(Ft["a"]),Bt["c"].add(Ft["b"]),Bt["c"].add(Qt["a"]),a["a"].component("font-awesome-icon",qt["a"]),a["a"].config.productionTip=!1,new a["a"]({router:It,render:function(t){return t(P)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var o=n("9c0c"),r=n.n(o);r.a},"6e5d":function(t,e,n){},"9c0c":function(t,e,n){},af35:function(t,e,n){},e898:function(t,e,n){},f281:function(t,e,n){"use strict";var o=n("e898"),r=n.n(o);r.a}});
//# sourceMappingURL=app.13ebb25f.js.map